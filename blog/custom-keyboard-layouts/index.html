<head>
	<link rel="stylesheet" type="text/css" href="/css/index.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
	<link rel="icon" href="/img/icon.png">
	<title>
		Blog - Custom Keyboard Layouts
	</title>
</head>
<body>
	<div id="headerdiv">
	<a href="/blog">Back</a>
</div>


	<div id="maindiv">
		<p style="font-size: 48px; border-bottom: 6px double #FF0000; text-align: center; padding-bottom: 32px; margin-left: 0px; margin-right: 0px;"><b>Custom Keyboard Layouts</b></p>


		<p>If you&rsquo;re using a PC or laptop keyboard, there&rsquo;s a good chance it comes with the EN (US) keyboard layout. That&rsquo;s the letters of the English alphabet, along with special symbols like <code>;:'&quot;[]()</code>. This is a great layout for general use as well as programming.</p>
<p>What this layout lacks is the special letters non-English languages use. Hungarian uses <code>óöőúüűí</code>, German <code>öüäß</code>, and Romanian <code>îăâșț</code>, along with their capitalized versions.</p>
<p>To type these letters, the typical solution is to change the keyboard layout to the language&rsquo;s. However, this doesn&rsquo;t come without the drawback of messing with the existing layout of symbols. For example on the Hungarian 101-key layout, the key to the right of <code>p</code> results in <code>ő</code>. That&rsquo;s great&hellip; but how do I type <code>[</code> now? Am I forced to forever be switching between the different layouts, having to not only learn each of them, but get used to my layout changing all the time?</p>
<p>Luckily there is a solution. The right Alt key, also called AltGr. It can be used in combination with existing keys to produce new symbols. For example, I can have the following setup:</p>
<table>
<thead>
<tr>
<th>Keys pressed</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>[</td>
<td>[</td>
</tr>
<tr>
<td>Shift [</td>
<td>{</td>
</tr>
<tr>
<td>AltGr [</td>
<td>ő</td>
</tr>
<tr>
<td>Shift AltGr [</td>
<td>Ő</td>
</tr>
</tbody>
</table>
<p>Similarly, I could (and did) create keybinds for all the letters I want to type in the three languages I need. In short, I had to create a custom keyboard layout.</p>
<p>I personally use a Linux laptop, but I was provided a Windows laptop for work. Follow along with my adventure as I get things working on each platform.</p>
<h1 id="windows-11">Windows 11</h1>
<p>Windows is not exactly known for its support of user choice, and Windows 11 is perhaps worse than 10. Despite this, the <span style="text-decoration: underline;">Microsoft Keyboard Layout Creator</span> is totally functional.</p>
<p><img src="/img/ckl_dloadcreator.png" alt=""></p>
<p>Naturally, we get a banner about third-party cookies on the download page. I will give Microsoft credit for the clearly visible Reject button though - the internet has gotten scummy enough that not all sites have even that.</p>
<p>This might not be the best time to mention that I actually had to edit the HTML of the page to take this screenshot. Originally, about 70% of the page was taken up by an ad for a laptop.</p>
<p>You might ask &ldquo;Do I really need to install a program to generate a keyboard layout - essentially a configuration file?&rdquo;. To you I say: ask less questions. Just accept the License Agreement without reading it and proceed</p>
<p><img src="/img/ckl_installcreator.png" alt=""></p>
<p>Not so fast! The <em>installer</em> for the <abbr title="Microsoft Keyboard Language Creator">MSKLC</abbr> told me that I had to install the .NET Framework. Specifically version 3.5 - you know, from the year 2008.</p>
<p>One more download later, I installed the .Net Framework. I could move on to installing MSKLC. That installer only crashed once (refusing to close even when &ldquo;killed&rdquo; from the Task Manager). Luckily, after a few minutes, it decided to work.</p>
<p>The MSKLC actually looks alright. I had to load the English keyboard to make modifications on top of that layout. Totally reasonable. Then, I just had to click the corresponding key and I could input what character I wanted that key to type.</p>
<p><img src="/img/ckl_kcl.png" alt=""></p>
<p>Now you might intuitively think that Shift-clicking a key would change what Shift + that key types. <em>lol</em>.</p>
<p>I spent a few minutes copy-pasting the characters from Wikipedia into this tool. Again, that&rsquo;s perfectly fine - if I could type them, I wouldn&rsquo;t be here in the first place.</p>
<p>Once finished, I could Validate the layout. This came with a nice little animation on my taskbar.</p>
<p><img src="/img/ckl_spaz.gif" alt=""></p>
<p>I ended up successfully exporting my custom layout into&hellip; this.</p>
<p><img src="/img/ckl_files.png" alt=""></p>
<p>As strange as it is to have a keyboard layout as a <code>.exe</code> file, it actually worked.</p>
<p>It took a while to navigate through Windows&rsquo; menu system. The mix of the legacy Control Panel and the limited but new Settings App is truly a wonder to work with. In the end, I narrowed it down to this page. Changing the keyboard layout was somewhere in here.</p>
<p><img src="/img/ckl_menu.png" alt=""></p>
<p>Did you find it? It&rsquo;s this little dropdown.</p>
<p><img src="/img/ckl_menu2.png" alt=""></p>
<p>I realized that I made a mistake! I accidentally put <code>î</code> on <code>AltGr z</code> and <code>â</code> on <code>AltGr q</code>. I wanted them the other way around.</p>
<p>No problem! I remembered to save the layout file before exporting, so I just open it up, switch the two around, and export it again, right?</p>
<p><em>Right?</em></p>
<p>Well, I got the following error message. Well, technically I got an error message pointing to a log file, but that&rsquo;s just details at this point.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>ERROR: The keyboard name &#39;N_KB&#39; is already in use on this machine.
</span></span></code></pre></div><p>Yes.</p>
<p>Yes, it&rsquo;s in use.</p>
<p>And I want to override it.</p>
<p>Well, searching for the error message, I got <a href="https://answers.microsoft.com/en-us/windows/forum/all/how-do-i-remove-a-keyboard-layout/8836ef84-8742-425c-b9d2-ba56acf3e5fc">this</a> question regarding the same problem on Microsoft&rsquo;s website, where an actual Microsoft employee responded with the wonderfully unhelpful &ldquo;idk, ask somewhere else&rdquo;.</p>
<p><img src="/img/ckl_divya.png" alt=""></p>
<p>The <em>totally</em> sustainable workaround was to simply give my layout a new name. Enter <code>Copy-of-N_KB_final_5_final</code>.</p>
<p>It took a while, but in the end I got the keyboard working. Was there a better way to do things? Who knows. Even if there was, Windows did a terrible job at communicating it.</p>
<h1 id="macos">MacOS</h1>
<p>todo</p>
<h1 id="arch-linux">Arch Linux</h1>
<p>todo</p>
<hr>

		<p>Created: 2022 Nov 23 / Modified: 2022 Nov 23</p>
		
	</div>
</body>
